{"uid":"ad54637ef43d5d68","name":"test_ask_auth_for_imp_question_send_bitcoin_on","fullName":"test.spec.test_ask_auth_for_imp_operations#test_ask_auth_for_imp_question_send_bitcoin_on","historyId":"be91681fc5751ce78fcd5f5734318b18","time":{"start":1766072780041,"stop":1766073067574,"duration":287533},"description":"Test for hiding exhausted asset","descriptionHtml":"<p>Test for hiding exhausted asset</p>\n","status":"failed","statusMessage":"AssertionError: assert 'Authenticati... or canceled.' == 'Transaction ...211a1dabe9b45'\n  \n  - Transaction Id: fb85ec222ca8d8783acc0ba29e6093c50ca48770efd434875c2211a1dabe9b45\n  + Authentication failed or canceled.","statusTrace":"wallets_and_operations = WalletTestSetup(first_page_features=<e2e_tests.test.features.main_features.MainFeatures object at 0x7f5aea012fc0>, sec...e_operations=<e2e_tests.test.utilities.base_operation.BaseOperations object at 0x7f5ae9c293a0>, wallet_mode='embedded')\n\n    @allure.feature('Ask authorization for important operations')\n    @allure.story('Toggling on ask authorization for import operations')\n    def test_ask_auth_for_imp_question_send_bitcoin_on(wallets_and_operations: WalletTestSetup):\n        \"\"\"Test for hiding exhausted asset\"\"\"\n        with allure.step('Initializing the wallet'):\n            wallets_and_operations.first_page_features.wallet_features.create_and_fund_wallet(\n                wallets_and_operations, FIRST_APPLICATION, FIRST_APPLICATION_URL,\n            )\n            wallets_and_operations.second_page_features.wallet_features.create_and_fund_wallet(\n                wallets_and_operations, SECOND_APPLICATION, SECOND_APPLICATION_URL,\n            )\n    \n        with allure.step('Turning on ask authorization for import operations'):\n            wallets_and_operations.first_page_operations.do_focus_on_application(\n                FIRST_APPLICATION,\n            )\n            wallets_and_operations.first_page_objects.sidebar_page_objects.click_settings_button()\n    \n            is_on_or_not = kr.get_password(FIRST_SERVICE, NATIVE_AUTH_ENABLE)\n            native_status_casted: bool = SettingRepository.str_to_bool(\n                is_on_or_not,\n            )\n    \n            if native_status_casted is not True:\n                wallets_and_operations.first_page_objects.settings_page_objects.click_ask_auth_imp_question()\n                toggle_button = wallets_and_operations.first_page_objects.settings_page_objects.ask_auth_for_imp_question_toggle()\n                if toggle_button:\n                    if getattr(toggle_button, 'checked', None) is False:\n                        wallets_and_operations.first_page_objects.settings_page_objects.click_ask_auth_imp_question()\n                wallets_and_operations.first_page_objects.sidebar_page_objects.click_fungibles_button()\n    \n        with allure.step('Getting the receiver\\'s address'):\n            wallets_and_operations.second_page_operations.do_focus_on_application(\n                SECOND_APPLICATION,\n            )\n            wallets_and_operations.second_page_objects.fungible_page_objects.click_bitcoin_frame()\n            wallets_and_operations.second_page_objects.bitcoin_detail_page_objects.click_receive_bitcoin_button()\n            address, _ = wallets_and_operations.second_page_features.receive_features.receive(\n                SECOND_APPLICATION, transfer_type='bitcoin',\n            )\n    \n        with allure.step('Sending the bitcoin'):\n            wallets_and_operations.first_page_operations.do_focus_on_application(\n                FIRST_APPLICATION,\n            )\n            wallets_and_operations.first_page_objects.sidebar_page_objects.click_fungibles_button()\n            wallets_and_operations.first_page_objects.fungible_page_objects.click_bitcoin_frame()\n            wallets_and_operations.first_page_objects.bitcoin_detail_page_objects.click_send_bitcoin_button()\n            wallets_and_operations.first_page_features.send_features.send(\n                FIRST_APPLICATION, address, ASSET_AMOUNT, transfer_type='bitcoin', is_native_auth_enabled=True,\n            )\n            _, toaster_description = wallets_and_operations.first_page_objects.toaster_page_objects.click_toaster_frame()\n            wallets_and_operations.first_page_objects.bitcoin_detail_page_objects.click_bitcoin_close_button()\n    \n        with allure.step('asserting tx id'):\n            wallets_and_operations.second_page_operations.do_focus_on_application(\n                SECOND_APPLICATION,\n            )\n            wallets_and_operations.second_page_objects.bitcoin_detail_page_objects.click_bitcoin_refresh_button()\n            wallets_and_operations.second_page_objects.bitcoin_detail_page_objects.click_bitcoin_transaction_frame()\n            bitcoin_tx_id = wallets_and_operations.second_page_objects.bitcoin_transaction_detail_page_objects.get_bitcoin_tx_id()\n            wallets_and_operations.second_page_objects.bitcoin_transaction_detail_page_objects.click_close_button()\n            wallets_and_operations.second_page_objects.bitcoin_detail_page_objects.click_bitcoin_close_button()\n            bitcoin_tx_id = re.sub(\n                r'[\\u200B\\u200C\\u200D\\u2060\\uFEFF]', '', bitcoin_tx_id,\n            )\n>           assert toaster_description == INFO_BITCOIN_SENT.format(bitcoin_tx_id)\nE           AssertionError: assert 'Authenticati... or canceled.' == 'Transaction ...211a1dabe9b45'\nE             \nE             - Transaction Id: fb85ec222ca8d8783acc0ba29e6093c50ca48770efd434875c2211a1dabe9b45\nE             + Authentication failed or canceled.\n\ne2e_tests/test/spec/test_ask_auth_for_imp_operations.py:97: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"cleanup_between_tests","time":{"start":1766072780040,"stop":1766072780040,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"wallets_and_operations","time":{"start":1766072780041,"stop":1766072780041,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"testStage":{"description":"Test for hiding exhausted asset","status":"failed","statusMessage":"AssertionError: assert 'Authenticati... or canceled.' == 'Transaction ...211a1dabe9b45'\n  \n  - Transaction Id: fb85ec222ca8d8783acc0ba29e6093c50ca48770efd434875c2211a1dabe9b45\n  + Authentication failed or canceled.","statusTrace":"wallets_and_operations = WalletTestSetup(first_page_features=<e2e_tests.test.features.main_features.MainFeatures object at 0x7f5aea012fc0>, sec...e_operations=<e2e_tests.test.utilities.base_operation.BaseOperations object at 0x7f5ae9c293a0>, wallet_mode='embedded')\n\n    @allure.feature('Ask authorization for important operations')\n    @allure.story('Toggling on ask authorization for import operations')\n    def test_ask_auth_for_imp_question_send_bitcoin_on(wallets_and_operations: WalletTestSetup):\n        \"\"\"Test for hiding exhausted asset\"\"\"\n        with allure.step('Initializing the wallet'):\n            wallets_and_operations.first_page_features.wallet_features.create_and_fund_wallet(\n                wallets_and_operations, FIRST_APPLICATION, FIRST_APPLICATION_URL,\n            )\n            wallets_and_operations.second_page_features.wallet_features.create_and_fund_wallet(\n                wallets_and_operations, SECOND_APPLICATION, SECOND_APPLICATION_URL,\n            )\n    \n        with allure.step('Turning on ask authorization for import operations'):\n            wallets_and_operations.first_page_operations.do_focus_on_application(\n                FIRST_APPLICATION,\n            )\n            wallets_and_operations.first_page_objects.sidebar_page_objects.click_settings_button()\n    \n            is_on_or_not = kr.get_password(FIRST_SERVICE, NATIVE_AUTH_ENABLE)\n            native_status_casted: bool = SettingRepository.str_to_bool(\n                is_on_or_not,\n            )\n    \n            if native_status_casted is not True:\n                wallets_and_operations.first_page_objects.settings_page_objects.click_ask_auth_imp_question()\n                toggle_button = wallets_and_operations.first_page_objects.settings_page_objects.ask_auth_for_imp_question_toggle()\n                if toggle_button:\n                    if getattr(toggle_button, 'checked', None) is False:\n                        wallets_and_operations.first_page_objects.settings_page_objects.click_ask_auth_imp_question()\n                wallets_and_operations.first_page_objects.sidebar_page_objects.click_fungibles_button()\n    \n        with allure.step('Getting the receiver\\'s address'):\n            wallets_and_operations.second_page_operations.do_focus_on_application(\n                SECOND_APPLICATION,\n            )\n            wallets_and_operations.second_page_objects.fungible_page_objects.click_bitcoin_frame()\n            wallets_and_operations.second_page_objects.bitcoin_detail_page_objects.click_receive_bitcoin_button()\n            address, _ = wallets_and_operations.second_page_features.receive_features.receive(\n                SECOND_APPLICATION, transfer_type='bitcoin',\n            )\n    \n        with allure.step('Sending the bitcoin'):\n            wallets_and_operations.first_page_operations.do_focus_on_application(\n                FIRST_APPLICATION,\n            )\n            wallets_and_operations.first_page_objects.sidebar_page_objects.click_fungibles_button()\n            wallets_and_operations.first_page_objects.fungible_page_objects.click_bitcoin_frame()\n            wallets_and_operations.first_page_objects.bitcoin_detail_page_objects.click_send_bitcoin_button()\n            wallets_and_operations.first_page_features.send_features.send(\n                FIRST_APPLICATION, address, ASSET_AMOUNT, transfer_type='bitcoin', is_native_auth_enabled=True,\n            )\n            _, toaster_description = wallets_and_operations.first_page_objects.toaster_page_objects.click_toaster_frame()\n            wallets_and_operations.first_page_objects.bitcoin_detail_page_objects.click_bitcoin_close_button()\n    \n        with allure.step('asserting tx id'):\n            wallets_and_operations.second_page_operations.do_focus_on_application(\n                SECOND_APPLICATION,\n            )\n            wallets_and_operations.second_page_objects.bitcoin_detail_page_objects.click_bitcoin_refresh_button()\n            wallets_and_operations.second_page_objects.bitcoin_detail_page_objects.click_bitcoin_transaction_frame()\n            bitcoin_tx_id = wallets_and_operations.second_page_objects.bitcoin_transaction_detail_page_objects.get_bitcoin_tx_id()\n            wallets_and_operations.second_page_objects.bitcoin_transaction_detail_page_objects.click_close_button()\n            wallets_and_operations.second_page_objects.bitcoin_detail_page_objects.click_bitcoin_close_button()\n            bitcoin_tx_id = re.sub(\n                r'[\\u200B\\u200C\\u200D\\u2060\\uFEFF]', '', bitcoin_tx_id,\n            )\n>           assert toaster_description == INFO_BITCOIN_SENT.format(bitcoin_tx_id)\nE           AssertionError: assert 'Authenticati... or canceled.' == 'Transaction ...211a1dabe9b45'\nE             \nE             - Transaction Id: fb85ec222ca8d8783acc0ba29e6093c50ca48770efd434875c2211a1dabe9b45\nE             + Authentication failed or canceled.\n\ne2e_tests/test/spec/test_ask_auth_for_imp_operations.py:97: AssertionError","steps":[{"name":"Initializing the wallet","time":{"start":1766072780041,"stop":1766072946414,"duration":166373},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Turning on ask authorization for import operations","time":{"start":1766072946414,"stop":1766072963457,"duration":17043},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Getting the receiver's address","time":{"start":1766072963457,"stop":1766072994664,"duration":31207},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Sending the bitcoin","time":{"start":1766072994664,"stop":1766073049923,"duration":55259},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"asserting tx id","time":{"start":1766073049923,"stop":1766073067573,"duration":17650},"status":"failed","statusMessage":"AssertionError: assert 'Authenticati... or canceled.' == 'Transaction ...211a1dabe9b45'\n  \n  - Transaction Id: fb85ec222ca8d8783acc0ba29e6093c50ca48770efd434875c2211a1dabe9b45\n  + Authentication failed or canceled.\n","statusTrace":"  File \"/home/runner/work/iris-wallet-desktop/iris-wallet-desktop/e2e_tests/test/spec/test_ask_auth_for_imp_operations.py\", line 97, in test_ask_auth_for_imp_question_send_bitcoin_on\n    assert toaster_description == INFO_BITCOIN_SENT.format(bitcoin_tx_id)\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":5,"attachmentsCount":0,"hasContent":true},"afterStages":[{"name":"cleanup_between_tests::0","time":{"start":1766073067611,"stop":1766073069623,"duration":2012},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"feature","value":"Ask authorization for important operations"},{"name":"story","value":"Toggling on ask authorization for import operations"},{"name":"parentSuite","value":"test.spec"},{"name":"suite","value":"test_ask_auth_for_imp_operations"},{"name":"host","value":"runnervmh13bl"},{"name":"thread","value":"37122-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test.spec.test_ask_auth_for_imp_operations"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"ad54637ef43d5d68.json","parameterValues":[]}