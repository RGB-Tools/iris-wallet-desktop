{"uid":"2f831551a45e84b6","name":"test_send_and_receive_with_correct_invoice_for_btc","fullName":"test.spec.test_btc_channel_tx#test_send_and_receive_with_correct_invoice_for_btc","historyId":"308718a6b7870dc19f24cf48140b5ceb","time":{"start":1763723921940,"stop":1763724058584,"duration":136644},"description":"\n    Test sending and receiving with correct invoice.\n\n    This test case creates embedded wallets, funds them, gets the node URI, creates a channel,\n    creates an invoice, sends the asset with the invoice, and verifies the success message.\n\n    Args:\n        wallets_and_operations (tuple): A tuple containing the page features, objects, and operations for the first and second applications.\n\n    Returns:\n        None\n    ","descriptionHtml":"<pre><code>Test sending and receiving with correct invoice.\n\nThis test case creates embedded wallets, funds them, gets the node URI, creates a channel,\ncreates an invoice, sends the asset with the invoice, and verifies the success message.\n\nArgs:\n    wallets_and_operations (tuple): A tuple containing the page features, objects, and operations for the first and second applications.\n\nReturns:\n    None\n</code></pre>\n","status":"broken","statusMessage":"AttributeError: 'bool' object has no attribute 'grabFocus'","statusTrace":"wallets_and_operations = WalletTestSetup(first_page_features=<e2e_tests.test.features.main_features.MainFeatures object at 0x7f01f4a94950>, sec...e_operations=<e2e_tests.test.utilities.base_operation.BaseOperations object at 0x7f01f4d041d0>, wallet_mode='embedded')\n\n    @allure.feature('Channel creation for BTC')\n    @allure.story('Send and receive with correct invoice for BTC')\n    def test_send_and_receive_with_correct_invoice_for_btc(wallets_and_operations: WalletTestSetup):\n        \"\"\"\n        Test sending and receiving with correct invoice.\n    \n        This test case creates embedded wallets, funds them, gets the node URI, creates a channel,\n        creates an invoice, sends the asset with the invoice, and verifies the success message.\n    \n        Args:\n            wallets_and_operations (tuple): A tuple containing the page features, objects, and operations for the first and second applications.\n    \n        Returns:\n            None\n        \"\"\"\n        node_uri = None\n    \n        with allure.step('Create and fund first wallet for btc channel'):\n            wallets_and_operations.first_page_features.wallet_features.create_and_fund_wallet(\n                wallets_and_operations=wallets_and_operations, application=FIRST_APPLICATION, application_url=FIRST_APPLICATION_URL,\n            )\n    \n        with allure.step('Create and fund second wallet for btc channel'):\n            wallets_and_operations.second_page_features.wallet_features.create_and_fund_wallet(\n                wallets_and_operations=wallets_and_operations, application=SECOND_APPLICATION, application_url=SECOND_APPLICATION_URL,\n            )\n    \n        with allure.step('Get node URI for btc channel'):\n            if wallets_and_operations.wallet_mode == WalletType.REMOTE_TYPE_WALLET.value:\n                node_uri = wallets_and_operations.second_page_features.channel_features.get_node_uri_for_remote(\n                    application=SECOND_APPLICATION, ip_address=IP_ADDRESS, ln_port=LN_PORT,\n                )\n            else:\n                node_uri = wallets_and_operations.second_page_features.channel_features.get_node_uri_for_embedded(\n                    application=SECOND_APPLICATION, ip_address=IP_ADDRESS,\n                )\n    \n        with allure.step('Create channel for btc'):\n            wallets_and_operations.first_page_operations.do_focus_on_application(\n                FIRST_APPLICATION,\n            )\n            _channel_status = wallets_and_operations.first_page_features.channel_features.create_channel(\n                application=FIRST_APPLICATION, node_uri=node_uri, asset_ticker=ASSET_TICKER, channel_capacity=CHANNEL_CAPACITY,\n            )\n    \n        with allure.step('Create invoice'):\n            wallets_and_operations.second_page_operations.do_focus_on_application(\n                SECOND_APPLICATION,\n            )\n            wallets_and_operations.second_page_objects.fungible_page_objects.click_bitcoin_frame()\n            wallets_and_operations.second_page_objects.bitcoin_detail_page_objects.click_receive_bitcoin_button()\n            _, btc_invoice = wallets_and_operations.second_page_features.receive_features.receive(\n                application=SECOND_APPLICATION, transfer_type=TransferType.LIGHTNING.value, value=PAY_AMOUNT,\n            )\n    \n        wallets_and_operations.first_page_operations.do_focus_on_application(\n            FIRST_APPLICATION,\n        )\n        with allure.step('Send btc with correct invoice'):\n            wallets_and_operations.first_page_objects.fungible_page_objects.click_bitcoin_frame()\n            wallets_and_operations.first_page_objects.bitcoin_detail_page_objects.click_send_bitcoin_button()\n>           wallets_and_operations.first_page_features.send_features.send(\n                application=FIRST_APPLICATION, receiver_invoice=btc_invoice, transfer_type=TransferType.LIGHTNING.value,\n            )\n\ne2e_tests/test/spec/test_btc_channel_tx.py:86: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ne2e_tests/test/features/send.py:34: in send\n    if transfer_type == 'lightning' and self.do_is_displayed(self.wallet_transfer_page_objects.lightning_button()):\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <e2e_tests.test.features.send.SendOperation object at 0x7f01f4f2c3e0>\nelement = False\n\n    def do_is_displayed(self, element):\n        \"\"\"\n        Checks if the specified element is displayed.\n    \n        Args:\n            element (Node): The element to check.\n    \n        Returns:\n            bool: True if the element is displayed, False otherwise.\n        \"\"\"\n>       element.grabFocus()\nE       AttributeError: 'bool' object has no attribute 'grabFocus'\n\ne2e_tests/test/utilities/base_operation.py:141: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"test_environment","time":{"start":1763723917955,"stop":1763723921939,"duration":3984},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wallets_and_operations","time":{"start":1763723921939,"stop":1763723921939,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Test sending and receiving with correct invoice.\n\n    This test case creates embedded wallets, funds them, gets the node URI, creates a channel,\n    creates an invoice, sends the asset with the invoice, and verifies the success message.\n\n    Args:\n        wallets_and_operations (tuple): A tuple containing the page features, objects, and operations for the first and second applications.\n\n    Returns:\n        None\n    ","status":"broken","statusMessage":"AttributeError: 'bool' object has no attribute 'grabFocus'","statusTrace":"wallets_and_operations = WalletTestSetup(first_page_features=<e2e_tests.test.features.main_features.MainFeatures object at 0x7f01f4a94950>, sec...e_operations=<e2e_tests.test.utilities.base_operation.BaseOperations object at 0x7f01f4d041d0>, wallet_mode='embedded')\n\n    @allure.feature('Channel creation for BTC')\n    @allure.story('Send and receive with correct invoice for BTC')\n    def test_send_and_receive_with_correct_invoice_for_btc(wallets_and_operations: WalletTestSetup):\n        \"\"\"\n        Test sending and receiving with correct invoice.\n    \n        This test case creates embedded wallets, funds them, gets the node URI, creates a channel,\n        creates an invoice, sends the asset with the invoice, and verifies the success message.\n    \n        Args:\n            wallets_and_operations (tuple): A tuple containing the page features, objects, and operations for the first and second applications.\n    \n        Returns:\n            None\n        \"\"\"\n        node_uri = None\n    \n        with allure.step('Create and fund first wallet for btc channel'):\n            wallets_and_operations.first_page_features.wallet_features.create_and_fund_wallet(\n                wallets_and_operations=wallets_and_operations, application=FIRST_APPLICATION, application_url=FIRST_APPLICATION_URL,\n            )\n    \n        with allure.step('Create and fund second wallet for btc channel'):\n            wallets_and_operations.second_page_features.wallet_features.create_and_fund_wallet(\n                wallets_and_operations=wallets_and_operations, application=SECOND_APPLICATION, application_url=SECOND_APPLICATION_URL,\n            )\n    \n        with allure.step('Get node URI for btc channel'):\n            if wallets_and_operations.wallet_mode == WalletType.REMOTE_TYPE_WALLET.value:\n                node_uri = wallets_and_operations.second_page_features.channel_features.get_node_uri_for_remote(\n                    application=SECOND_APPLICATION, ip_address=IP_ADDRESS, ln_port=LN_PORT,\n                )\n            else:\n                node_uri = wallets_and_operations.second_page_features.channel_features.get_node_uri_for_embedded(\n                    application=SECOND_APPLICATION, ip_address=IP_ADDRESS,\n                )\n    \n        with allure.step('Create channel for btc'):\n            wallets_and_operations.first_page_operations.do_focus_on_application(\n                FIRST_APPLICATION,\n            )\n            _channel_status = wallets_and_operations.first_page_features.channel_features.create_channel(\n                application=FIRST_APPLICATION, node_uri=node_uri, asset_ticker=ASSET_TICKER, channel_capacity=CHANNEL_CAPACITY,\n            )\n    \n        with allure.step('Create invoice'):\n            wallets_and_operations.second_page_operations.do_focus_on_application(\n                SECOND_APPLICATION,\n            )\n            wallets_and_operations.second_page_objects.fungible_page_objects.click_bitcoin_frame()\n            wallets_and_operations.second_page_objects.bitcoin_detail_page_objects.click_receive_bitcoin_button()\n            _, btc_invoice = wallets_and_operations.second_page_features.receive_features.receive(\n                application=SECOND_APPLICATION, transfer_type=TransferType.LIGHTNING.value, value=PAY_AMOUNT,\n            )\n    \n        wallets_and_operations.first_page_operations.do_focus_on_application(\n            FIRST_APPLICATION,\n        )\n        with allure.step('Send btc with correct invoice'):\n            wallets_and_operations.first_page_objects.fungible_page_objects.click_bitcoin_frame()\n            wallets_and_operations.first_page_objects.bitcoin_detail_page_objects.click_send_bitcoin_button()\n>           wallets_and_operations.first_page_features.send_features.send(\n                application=FIRST_APPLICATION, receiver_invoice=btc_invoice, transfer_type=TransferType.LIGHTNING.value,\n            )\n\ne2e_tests/test/spec/test_btc_channel_tx.py:86: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ne2e_tests/test/features/send.py:34: in send\n    if transfer_type == 'lightning' and self.do_is_displayed(self.wallet_transfer_page_objects.lightning_button()):\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <e2e_tests.test.features.send.SendOperation object at 0x7f01f4f2c3e0>\nelement = False\n\n    def do_is_displayed(self, element):\n        \"\"\"\n        Checks if the specified element is displayed.\n    \n        Args:\n            element (Node): The element to check.\n    \n        Returns:\n            bool: True if the element is displayed, False otherwise.\n        \"\"\"\n>       element.grabFocus()\nE       AttributeError: 'bool' object has no attribute 'grabFocus'\n\ne2e_tests/test/utilities/base_operation.py:141: AttributeError","steps":[{"name":"Create and fund first wallet for btc channel","time":{"start":1763723921940,"stop":1763723946131,"duration":24191},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Create and fund second wallet for btc channel","time":{"start":1763723946131,"stop":1763723969867,"duration":23736},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Get node URI for btc channel","time":{"start":1763723969867,"stop":1763723977200,"duration":7333},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Create channel for btc","time":{"start":1763723977200,"stop":1763724008456,"duration":31256},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Create invoice","time":{"start":1763724008456,"stop":1763724024031,"duration":15575},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Send btc with correct invoice","time":{"start":1763724024034,"stop":1763724058582,"duration":34548},"status":"broken","statusMessage":"AttributeError: 'bool' object has no attribute 'grabFocus'\n","statusTrace":"  File \"/home/runner/work/iris-wallet-desktop/iris-wallet-desktop/e2e_tests/test/spec/test_btc_channel_tx.py\", line 86, in test_send_and_receive_with_correct_invoice_for_btc\n    wallets_and_operations.first_page_features.send_features.send(\n  File \"/home/runner/work/iris-wallet-desktop/iris-wallet-desktop/e2e_tests/test/features/send.py\", line 34, in send\n    if transfer_type == 'lightning' and self.do_is_displayed(self.wallet_transfer_page_objects.lightning_button()):\n                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/iris-wallet-desktop/iris-wallet-desktop/e2e_tests/test/utilities/base_operation.py\", line 141, in do_is_displayed\n    element.grabFocus()\n    ^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"425d748df009173e","name":"Screenshot on failure: test_send_and_receive_with_correct_invoice_for_btc","source":"425d748df009173e.png","type":"image/png","size":1375840}],"parameters":[],"stepsCount":6,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_environment::0","time":{"start":1763724058757,"stop":1763724058768,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"feature","value":"Channel creation for BTC"},{"name":"story","value":"Send and receive with correct invoice for BTC"},{"name":"parentSuite","value":"test.spec"},{"name":"suite","value":"test_btc_channel_tx"},{"name":"host","value":"runnervmfxdz0"},{"name":"thread","value":"5505-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test.spec.test_btc_channel_tx"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"2f831551a45e84b6.json","parameterValues":[]}